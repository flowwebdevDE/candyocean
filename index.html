<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Candyocean</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="mobile.css">
</head>

<body>

    <!-- PREVIEW LOGIN START (Diesen Block l√∂schen, um den Login zu entfernen) -->
    <div id="preview-login" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100%; background: var(--bg-color); z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 1rem; box-sizing: border-box;">
        <div style="background: white; padding: 2rem; border-radius: 16px; box-shadow: var(--shadow); max-width: 400px; width: 100%; text-align: center; box-sizing: border-box;">
            <h2 style="margin-top: 0; color: var(--primary-color);">Preview Zugang üîí</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-color);">Bitte Passwort eingeben</p>
            <input type="password" id="preview-pass" placeholder="Passwort" style="margin-bottom: 1rem;" onkeypress="if(event.key==='Enter') app.checkPreviewAccess()">
            <button onclick="app.checkPreviewAccess()">Eintreten</button>
            <p id="login-error" style="color: #ef4444; display: none; margin-top: 10px; font-weight: bold;">Falsches Passwort!</p>
        </div>
    </div>
    <!-- PREVIEW LOGIN END -->

    <div class="announcement-bar">
        üéâ Spare 10% auf alles mit: <strong>CANDYOCEAN2026</strong>
    </div>

    <header>
        <div class="header-container">
            <a href="#" class="logo" onclick="app.navigate('home')"><img src="co_logo.jpeg" alt=""></a>
            
            <div class="header-controls">
                <select id="header-country-select" class="nav-country-select" onchange="app.setCountry(this.value)">
                    <option value="DE">üá©üá™ DE</option>
                    <option value="AT">üá¶üáπ AT</option>
                    <option value="CH">üá®üá≠ CH</option>
                </select>

                <div class="cart-icon" onclick="app.navigate('cart')">
                    <!-- SVG Cart Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                    <span id="cart-count" class="cart-count" style="display:none">0</span>
                </div>

                <button class="hamburger" onclick="app.toggleMenu()" aria-label="Men√º">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <nav id="main-nav">
                    <ul>
                        <li><a onclick="app.navigate('home')" id="nav-home">Startseite</a></li>
                        <li><a onclick="app.navigate('shop')" id="nav-shop">Produkte</a></li>
                        <li><a onclick="app.navigate('contact')" id="nav-contact" style="display: none;">Kontakt</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="hero-banner" style="text-align: center;">
                <div class="hero-content">
                <h1 id="hero-title">S√º√üe Tr√§ume werden wahr</h1>
                <p id="hero-text" style="max-width: 600px; margin: 0 auto 2rem;">
                    Entdecke handgemachte Bonbons, feinste Schokolade und die besten Leckereien der Welt.
                </p>
                <button onclick="app.navigate('shop')" style="width: auto; padding: 1rem 2rem; font-size: 1.1rem;">Jetzt
                    Naschen</button>
                </div>
            </div>

            <div style="margin-top: 3rem;">
                <h2 style="text-align: center;">Bestseller</h2>
                <div id="featured-products" class="product-grid">
                    <!-- Featured products rendered via JS -->
                </div>
            </div>
        </section>

        <!-- Shop Section -->
        <section id="shop" class="section">
            <h2>Unsere Produkte</h2>
            <!-- Search Bar -->
            <div class="search-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon-overlay" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <input type="text" placeholder="S√º√üigkeiten suchen..." oninput="app.searchProducts(this.value)">
            </div>
            
            <!-- Shop Controls (Categories & Sort) -->
            <div class="shop-controls">
                <div class="filter-wrapper">
                    <div id="category-filters" class="category-filters"></div>
                    <button class="filter-toggle" onclick="app.toggleFilterView()" aria-label="Filter erweitern">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </button>
                </div>
                <select class="sort-select" onchange="app.sortProducts(this.value)">
                    <option value="default">Sortierung: Standard</option>
                    <option value="price-asc">Preis: Niedrigster zuerst</option>
                    <option value="price-desc">Preis: H√∂chster zuerst</option>
                    <option value="name-asc">Name: A-Z</option>
                </select>
            </div>

            <div id="product-list" class="product-grid">
                <!-- Products rendered via JS -->
            </div>
        </section>

        <!-- Product Detail Section -->
        <section id="product-detail" class="section">
            <div class="detail-header">
                <button onclick="app.navigate('shop')" class="back-link">‚Üê Zur√ºck zum Shop</button>
            </div>
            <div class="product-detail-wrapper">
                <div class="detail-image-container">
                    <img id="detail-img" src="" alt="">
                    <button id="detail-fav-btn" class="fav-btn" style="top: 20px; right: 20px; width: 50px; height: 50px;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    </button>
                </div>
                <div class="detail-content">
                    <span id="detail-category" class="category-badge">Kategorie</span>
                    <h1 id="detail-title">Produkt Name</h1>
                    <div id="detail-price" class="detail-price">0.00 ‚Ç¨</div>
                    <p id="detail-desc">Beschreibung...</p>
                    
                    <div class="detail-controls">
                        <!-- Controls injected via JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Cart Section -->
        <section id="cart" class="section">
            <h2 id="cart-section-title">Dein Warenkorb üõí</h2>
            <div class="cart-layout">
                <div id="cart-items-container">
                    <!-- Items list -->
                </div>
                <div id="cart-summary-container" class="cart-summary">
                    <h3>Zusammenfassung</h3>
                    <div class="summary-row">
                        <span>Zwischensumme</span>
                        <span id="cart-subtotal">0.00 ‚Ç¨</span>
                    </div>
                    <div class="summary-row" style="align-items: center;">
                        <span>Lieferland</span>
                        <select id="cart-country" onchange="app.setCountry(this.value)" style="width: auto; padding: 0.4rem; margin: 0; font-size: 0.9rem; border-radius: 8px;">
                            <option value="DE">Deutschland</option>
                            <option value="AT">√ñsterreich</option>
                            <option value="CH">Schweiz</option>
                        </select>
                    </div>
                    
                    <!-- Discount Input -->
                    <div class="discount-input-group">
                        <input type="text" id="discount-code" placeholder="Gutscheincode" style="margin-bottom: 0; padding: 0.6rem;">
                        <button onclick="app.applyDiscount()" style="width: auto; padding: 0.6rem 1rem; font-size: 0.9rem;">Einl√∂sen</button>
                    </div>
                    <div id="cart-discount-row" class="discount-row" style="display: none;">
                        <span>Rabatt</span>
                        <span id="cart-discount-amount">-0.00 ‚Ç¨</span>
                    </div>

                    <div class="summary-row">
                        <span>Versand</span>
                        <span id="cart-shipping">0.00 ‚Ç¨</span>
                    </div>
                    <div class="summary-row" style="color: #666; font-size: 0.9rem;">
                        <span>Enth. MwSt.</span>
                        <span id="cart-tax">0.00 ‚Ç¨</span>
                    </div>
                    <div class="summary-total">
                        <span>Gesamt</span>
                        <span id="cart-total-display">0.00 ‚Ç¨</span>
                    </div>
                    <button onclick="app.checkout()" class="checkout-btn-large">Zur Kasse gehen ‚ûî</button>
                    <div class="trust-badges">
                        <span>üîí Sicher bezahlen</span>
                        <span>‚ö° Schneller Versand</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Checkout Section -->
        <section id="checkout" class="section">
            <!-- Background Magic -->
            <div class="checkout-bg">
                <div class="orb orb-1"></div>
                <div class="orb orb-2"></div>
                <div class="orb orb-3"></div>
            </div>
            
            <div class="checkout-wizard">
                <div class="wizard-header">
                    <button onclick="app.navigate('cart')" style="position: absolute; top: 2rem; right: 2rem; background: transparent; border: none; font-size: 2rem; cursor: pointer; color: var(--text-color); width: auto; padding: 0; line-height: 1; z-index: 10;">&times;</button>
                    <h2 style="margin: 0;">Dein Weg zum Gl√ºck ‚ú®</h2>
                    <div class="wizard-progress">
                        <div class="progress-bar-fill" id="wizard-progress-bar"></div>
                    </div>
                </div>
                
                <div class="wizard-content">
                    <!-- Step 1: Address -->
                    <div class="wizard-step active" id="step-1">
                        <h3 style="margin-bottom: 1.5rem; color: var(--primary-color); font-size: 1.5rem; display: flex; align-items: center; gap: 10px;">
                            Wohin d√ºrfen wir liefern? 
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        </h3>
                        <form id="checkout-form-step1">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <input type="text" id="input-firstname" placeholder="Vorname" required autocomplete="given-name">
                                <input type="text" id="input-lastname" placeholder="Nachname" required autocomplete="family-name">
                            </div>
                            <div style="position: relative; margin-bottom: 10px;">
                                <input type="text" id="input-street" placeholder="Stra√üe & Hausnummer" required autocomplete="street-address" style="margin-bottom: 0;">
                                <div id="street-suggestions" class="autocomplete-suggestions"></div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1rem;">
                                <input type="text" id="input-zip" placeholder="PLZ" required autocomplete="postal-code" maxlength="5">
                                <input type="text" id="input-city" placeholder="Stadt" required autocomplete="address-level2">
                            </div>
                            <select id="input-country" required autocomplete="country" style="margin-bottom: 10px;">
                                <option value="" disabled selected>Land w√§hlen...</option>
                                <option value="DE">Deutschland (4,99 ‚Ç¨)</option>
                                <option value="AT">√ñsterreich (9,99 ‚Ç¨)</option>
                                <option value="CH">Schweiz (14,99 ‚Ç¨)</option>
                            </select>
                            <input type="email" id="input-email" placeholder="E-Mail Adresse" required autocomplete="email">
                        </form>
                    </div>

                    <!-- Step 2: Payment -->
                    <div class="wizard-step" id="step-2">
                        <h3 style="margin-bottom: 1.5rem; color: var(--primary-color); font-size: 1.5rem; display: flex; align-items: center; gap: 10px;">
                            Wie m√∂chtest du bezahlen?
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>
                        </h3>
                        <div class="payment-options">
                            <label class="payment-card selected" onclick="app.selectPayment(this)">
                                <input type="radio" name="payment" value="creditcard" checked>
                                <span class="payment-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg></span>
                                <strong>Kreditkarte</strong>
                            </label>
                            <label class="payment-card" onclick="app.selectPayment(this)">
                                <input type="radio" name="payment" value="paypal">
                                <span class="payment-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="M16 13H8"></path><path d="M16 17H8"></path><path d="M10 9H8"></path></svg></span>
                                <strong>PayPal</strong>
                            </label>
                        </div>
                    </div>

                    <!-- Step 3: Review -->
                    <div class="wizard-step" id="step-3">
                        <h3 style="margin-bottom: 1.5rem; color: var(--primary-color); font-size: 1.5rem; display: flex; align-items: center; gap: 10px;">
                            Alles korrekt?
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24"><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></svg>
                        </h3>
                        <div id="checkout-summary-wizard" style="background: rgba(255,255,255,0.5); padding: 1.5rem; border-radius: 20px; border: 1px solid rgba(255,255,255,0.8);"></div>
                        <div style="text-align: right; font-size: 1.8rem; font-weight: bold; margin-top: 1.5rem; color: var(--accent-color);" id="checkout-total-wizard"></div>
                    </div>
                </div>

                <div class="wizard-footer">
                    <button type="button" class="secondary" id="btn-back" onclick="app.prevStep()" style="width: auto; visibility: hidden; background: transparent; color: #666; border: 1px solid #ddd;">Zur√ºck</button>
                    <button type="button" id="btn-next" onclick="app.nextStep()" style="width: auto; padding: 1rem 2.5rem; font-size: 1.1rem;">Weiter ‚ûî</button>
                </div>
            </div>
        </section>

        <!-- Tracking Section -->
        <section id="tracking" class="section">
            <h2>Lieferstatus üöö</h2>
            <div style="background: white; padding: 2rem; border-radius: 24px; box-shadow: var(--shadow); max-width: 800px; margin: 0 auto;">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <p style="color: #666;">Bestellnummer</p>
                    <h3 id="tracking-order-id" style="font-size: 1.5rem; color: var(--accent-color); margin: 0;">-</h3>
                </div>

                <div class="tracking-timeline">
                    <div class="timeline-item active">
                        <div class="timeline-icon">‚úÖ</div>
                        <div class="timeline-content">
                            <strong>Bestellung eingegangen</strong>
                            <small>Wir haben deine Bestellung erhalten.</small>
                        </div>
                    </div>
                    <!-- Weitere Items werden via JS eingef√ºgt -->
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="section">
            <h2>Kontakt</h2>
            <div
                style="max-width: 600px; margin: 0 auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow);">
                <form onsubmit="event.preventDefault(); app.showToast('Nachricht gesendet! üíå'); event.target.reset();">
                    <label>Name</label>
                    <input type="text" required>
                    <label>Email</label>
                    <input type="email" required>
                    <label>Nachricht</label>
                    <textarea rows="5" required></textarea>
                    <button type="submit">Senden</button>
                </form>
            </div>
        </section>

        <!-- Success Section -->
        <section id="success" class="section" style="text-align: center; padding: 4rem 0;">
            <div style="background: white; padding: 3rem; border-radius: 24px; box-shadow: var(--shadow); display: inline-block; max-width: 500px; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
                <div style="font-size: 4rem; margin-bottom: 1rem;">üéâ</div>
                <h2 style="margin-top: 0;">Vielen Dank!</h2>
                <p>Deine Bestellung wurde erfolgreich simuliert.</p>
                <p style="background: var(--bg-color); padding: 1rem; border-radius: 8px; font-family: monospace; font-size: 1.2rem; margin: 1.5rem 0;">
                    Bestellnummer: <span id="order-id" style="color: var(--accent-color); font-weight: bold;">#000000</span>
                </p>
                <button onclick="app.downloadInvoice()" class="secondary" style="width: auto; margin-right: 10px;">Rechnung (PDF)</button>
                <button onclick="app.trackOrder()" class="secondary" style="width: auto; margin-right: 10px;">Lieferung verfolgen</button>
                <button onclick="app.navigate('home')" style="width: auto;">Weiter einkaufen</button>
            </div>
        </section>
    </main>
    
    <style>
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>

    <!-- Toast Container -->
    <div id="toast-container"></div>
    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <footer>
        <p>&copy; 2025 Candyocean. All rights reserved.<br>powered by <a href="https://flowwebdesign.de">Flowwebdesign</a></p>
        <p style="display: none;">
            <a href="#" onclick="alert('Impressum Placeholder')">Impressum</a> |
            <a href="#" onclick="alert('Datenschutz Placeholder')">Datenschutz</a>
        </p>
    </footer>
    <script src="products.js"></script>
    <script src="taxes.js"></script>
    <!-- jsPDF Library f√ºr Rechnungsdruck -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>

</html>